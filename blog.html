<!DOCTYPE html>
<html>
<head>
  <!-- Site made with Mobirise Website Builder v4.3.0, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.3.0, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="assets/images/ca-logo.png" type="image/x-icon">
  <meta name="description" content="HTML Blog Template - Free Download">
  <title>Blog | Common Aspect, LLC</title>
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/shopping-cart/minicart-theme.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">

    <style>
        .cert-logo {
            display: inline-block;
            margin: 0 10px 13px 0;
        }
        .navbar-nav .nav-item .nav-link {
            margin: .667em 1.667em !important;
            font-weight: 500 !important;
            padding: 0;
            transition: color .2s ease-in-out;
        }
        pre {
            overflow: auto;
            white-space: pre;
        }
    </style>
  
</head>
<body>

<!-- -->


<script>var shopcartSettings = {"shopcart_top_offset":120,"side_offset":20,"site_width":1150,"shopcart_icon_color":"#FFFFFF","shopcart_back_color":"#2969b0","shopcart_icon_size":48,"sc_count_color":"#FFFFFF","sc_count_back_color":"#fc26ae","sc_count_size":12,"checkout_button":"Check Out with"};</script>
<section class="menu cid-qv1frvgcz3" once="menu" id="menu1-7v" data-rv-view="541">

    

    <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm bg-color transparent">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="menu-logo">
            <!--
            <div class="navbar-brand">
                
                <span class="navbar-caption-wrap"><a class="navbar-caption text-white display-4" href="https://mobirise.com/bootstrap-template/">
                        BOOTSTRAP TEMPLATE</a></span>
            </div>
            -->
            <div class="navbar-brand">
                <a href="http://www.commonaspect.com" class="navbar-logo"><img src="assets/images/ca-logo.png" alt="Common Aspect logo"></a>
            </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <!--
            <ul class="navbar-nav nav-dropdown" data-app-modern-menu="true"><li class="nav-item dropdown"><a class="nav-link link text-white dropdown-toggle display-4" href="blog.html" data-toggle="dropdown-submenu" aria-expanded="false">
                        
                        BLOCK DEMOS 1</a><div class="dropdown-menu"><a class="text-white dropdown-item display-4" href="slider.html">Slider Header Demo</a><a class="text-white dropdown-item display-4" href="video-background.html">Video Background Demo</a><a class="text-white dropdown-item display-4" href="footer-template.html">Footer Template</a><a class="text-white dropdown-item display-4" href="table-template.html">Table Template</a><a class="text-white dropdown-item display-4" href="carousel-template.html">Carousel Template</a><a class="text-white dropdown-item display-4" href="blog.html">Gallery Template</a><a class="text-white dropdown-item display-4" href="menu-template.html">Menu Template</a><a class="text-white dropdown-item display-4" href="navigation-menu-template.html">Navigation Menu Template</a><a class="text-white dropdown-item display-4" href="navbar-template.html">Navbar Template</a><a class="text-white dropdown-item display-4" href="header-template.html">Header Template</a><a class="text-white dropdown-item display-4" href="registration-form-template.html">Registration Form Template</a><a class="text-white dropdown-item display-4" href="grid-template.html">Grid Template</a><a class="text-white dropdown-item display-4" href="social-network-template.html">Social Network Template</a><a class="text-white dropdown-item display-4" href="parallax-template.html">Parallax Template</a><a class="text-white dropdown-item display-4" href="parallax-scrolling-template.html">Parallax Scrolling Template</a></div></li>
                <li class="nav-item dropdown open"><a class="nav-link link text-white dropdown-toggle display-4" href="blog.html" data-toggle="dropdown-submenu" aria-expanded="true">
                        
                        BLOCK DEMOS 2</a><div class="dropdown-menu"><a class="text-white dropdown-item display-4" href="shopping-cart-template.html">Shopping Cart Template</a><a class="text-white dropdown-item display-4" href="contact-form-template.html">Contact Form Template</a><a class="text-white dropdown-item display-4" href="list-template.html">List Template</a><a class="text-white dropdown-item display-4" href="video-template.html">Video Template</a><a class="text-white dropdown-item display-4" href="photo-gallery-template.html">Photo Gallery Template</a><a class="text-white dropdown-item display-4" href="map-template.html">Map Template</a><a class="text-white dropdown-item display-4" href="faq-template.html">FAQ Template</a><a class="text-white dropdown-item display-4" href="slider-template.html">Slider Template</a><a class="text-white dropdown-item display-4" href="background-template.html">Video Background Template</a><a class="text-white dropdown-item display-4" href="documentation-template.html">Documentation Template</a><a class="text-white dropdown-item display-4" href="article-template.html">Article Template</a><a class="text-white dropdown-item display-4" href="google-maps-template.html">Google Maps Template</a><a class="text-white dropdown-item display-4" href="form-templates.html">Form Templates </a><a class="text-white dropdown-item display-4" href="tab-template.html">Tab Template</a><a class="text-white dropdown-item display-4" href="video-gallery-template.html">Video Gallery Template</a></div></li>
                
                <li class="nav-item dropdown">
                    <a class="nav-link link text-white dropdown-toggle display-4" href="page36.html" data-toggle="dropdown-submenu" aria-expanded="false">SITE TEMPLATES</a><div class="dropdown-menu"><a class="text-white dropdown-item display-4" href="one-page.html">One Page Template<br></a><a class="text-white dropdown-item display-4" href="blog.html">Blog Template Demo<br></a></div>
                </li></ul>
            <div class="navbar-buttons mbr-section-btn"><a class="btn btn-sm btn-primary display-4" href="https://mobirise.com/bootstrap-template/mobirise-free-template.zip">
                    
                    FREE DOWNLOAD</a></div>
                    -->
            <ul class="navbar-nav">

                <li class="nav-item"><a class="nav-link link text-white display-4" href="http://www.commonaspect.com#header3-8l">ABOUT US</a></li>

                <li class="nav-item"><a class="nav-link link text-white display-4" href="http://www.commonaspect.com#features2-8r">SERVICES</a></li>

                <li class="nav-item"><a class="nav-link link text-white display-4" href="http://www.commonaspect.com#footer2-8z">CONTACT</a></li>

                <li class="nav-item"><a class="nav-link link text-white display-4" href="blog.html">BLOG</a></li>

            </ul>
        </div>
    </nav>
</section>

<section class="engine"><a href="https://mobirise.co/j">design your own website for free</a></section><section class="mbr-section content5 cid-qvbiXHsAN2 mbr-parallax-background" id="content5-7w" data-rv-view="543">

    

    <div class="mbr-overlay" style="opacity: 0.6; background-color: rgb(35, 35, 35);">
    </div>

    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <!--
                <h1 class="align-center mbr-bold mbr-white pb-3 mbr-fonts-style display-1">BOOTSTRAP BLOG TEMPLATE</h1>
                <h3 class="mbr-section-subtitle align-center mbr-light mbr-white pb-3 mbr-fonts-style display-5">Make your own bootstrap blog in minutes!&nbsp;</h3>
                -->
                
            </div>
        </div>
    </div>
</section>

<section class="mbr-section content4 cid-qvbjfGj2Ze" id="content4-7x" data-rv-view="546">

    

    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <!--<h2 class="align-center pb-3 mbr-fonts-style display-5">GRAPH DATABASE IN MONGODB 3.4 - PART 1: EXTERNAL EDGE COLLECTIONS</h2>-->
                <h2 class="align-center pb-3 mbr-fonts-style display-5">EMULATING NEO4J GRAPH DB NODES AND EDGES IN MONGODB 3.4</h2>
                <h3 class="mbr-section-subtitle align-center mbr-light mbr-fonts-style display-7"><em>By Chris Heino posted October 15, 2017</em></h3>
                
            </div>
        </div>
    </div>
</section>

<section class="mbr-section article content1 cid-qvbjomyZfb" id="content1-7y" data-rv-view="548">
    
     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">Multi-modal NoSQL database MongoDB added several interesting new features in version 3.4, including the <a href="#">$graphlookup</a> and <a href="#">$facet</a> aggregation stages. In this article,
                I will explore how well the new $graphlookup feature compares to the graph querying capabilities of a specialized graph database such as Neo4j.  In particular, we will explain a technique storing graph vertexes and
                edges in separate MongoDB collections to allow maximum flexibility for querying based on both vertex and edge properties.  At the time of writing, I did not find any concrete examples of this technique online, although the
                MongoDB slide presentation <a href="#">here</a> makes mention of edge collections.  This example is based on my own experimentation.&nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">For our example data, let’s choose a classic example of a graph application: a product recommendations engine for an e-commerce site.&nbsp;
            </div>
        </div>
    </div>
</section>
<section class="cid-qvbjxOlHgO" id="image1-80" data-rv-view="550">
    <figure class="mbr-figure container">
        <div class="image-block" style="width: 66%;">
            <img src="assets/images/coffee-923094-1920-1920x1280-16-1400x933.jpg" width="1400" alt="Mobirise" title="" media-simple="true">
            <figcaption class="mbr-figure-caption mbr-figure-caption-over">
                <div class="container pb-5 mbr-white align-center mbr-fonts-style display-7">Vestibulum id nisl eu ipsum ultrices sodales. Donec non nibh at diam porta porttitor. Aenean dignissim porttitor aliquam. Etiam a sapien quis velit rhoncus pulvinar. Nunc dictum pretium lacus, nec convallis mauris vestibulum sit amet. Nam pretium tristique mauris in tempor. Phasellus consequat ipsum quis libero tristique ornare. Nulla ante libero, viverra at eros eu, fermentum rutrum lacus.</div>
            </figcaption>
        </div>
    </figure>
</section>
<section class="mbr-section article content1 cid-qvbjomyZfb" id="content1-8y" data-rv-view="548">
    <div class="container">
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <!-- TODO Should we name "vertexes" "products" instead? -->
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">My inspiration for this approach comes from the way graph databases such as Neo4j or OrientDB store vertexes and edges as separate objects in the database.
                For purposes of this example, we will create two collections in MongoDB, named vertexes and edges.  The documents in the vertexes collection will represent our e-commerce products and contain their attributes. The
                edge collection documents will represent the edges or relationships between vertexes or nodes, including a relationship type, a from_id for the source node ID, a to_id for the target node ID, and any other custom
                properties you want to include.&nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                Note that the different vertex types could be stored in separate collections (products, customers, etc.), but for the sake of simplicity, we will just use a generic vertex collection with a type designator.
                The example below looks for outbound relationships from the target product.&nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <!-- Remember code snippets are whitespace sensitive, so do not indent here or will appear centered in <pre> block -->
                <!-- CODE SNIPPET EXAMPLE HERE USING THIS FROM BOOTSTRAP https://v4-alpha.getbootstrap.com/content/code/ -->
                <pre>
                    <code>
db.vertex.aggregate( [
  { $match: { "name": "Node A" } },
  { $lookup: {
          from: "edge",
          localField: "name",
          foreignField: "from",
          as: "edge_docs"
    }
  },
  { $project: {
      "edge_docs": 1
    }
  },
  { $graphLookup: {
      from: "edge",
      startWith: "$edge_docs.to",
      connectFromField: "to",
      connectToField: "from",
      as: "invokers",
      maxDepth: 5,
      depthField: 'steps',
      restrictSearchWithMatch: { "label" : "invokes" }
    }
  },
  { $project: {
      "edges" : { $concatArrays: [ "$$ROOT.edge_docs", "$invokers" ] }
    }
  },
  { $unwind: "$edges" },
  { $sort: { 'edges.steps': 1 } },
  { $lookup: {
          from: "vertex",
          localField: "edges.to",
          foreignField: "name",
          as: "vertexes"
    }
  },
  { $unwind: "$vertexes" },
  { $group: { _id: null, edgs: { $push: "$edges" }, vrtxs: { $push: "$vertexes" } } },
  { $project: { _id: 0, edges: "$edgs", vertexes: "$vrtxs" } }
] )
                    </code>
                </pre>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                The query above performs the following steps in the aggregation pipeline:&nbsp;
                <ul>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/">$match</a> to select the target product node.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/">$lookup</a> to find all outbound edges from target node.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/">$project</a> to get the data we want to work with.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/graphLookup/">$graphLookup</a> to traverse the edges having label "invokes", up to 5 levels deep.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/">$project</a> to get an edges array.  Use $concatArrays to include the target node in the array.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/">$unwind</a> to get the documents in the edges  array.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/">$sort</a> on the "steps" field to list edges in order of traversal.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/">$lookup</a> to get all nodes in the traversal path.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/">$unwind</a> to get the documents in the vertexes array.</li>
                    <li>Use <a href="https://docs.mongodb.com/v3.2/reference/operator/aggregation/group/">$group</a> and <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/">$project</a> to aggregate the documents from each traversal step into a single document with a list of edges and nodes.</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section class="mbr-section article content1 cid-qvbjsgNEPl" id="content2-7z" data-rv-view="549">

     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <blockquote>This is a caution or other type of aside message we want to call the user's attention to.  This can be as long as we want it to be.&nbsp;</blockquote>
            </div>
        </div>
    </div>
</section>

<section class="mbr-section article content1 cid-qvbjomyZfb" id="content1-9y" data-rv-view="548">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                After running the query, we get the following output. This document gives us access to all edges and nodes that resulted from the graph traversal.&nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <!-- Remember code snippets are whitespace sensitive, so do not indent here or will appear centered in <pre> block -->
                <!-- CODE SNIPPET EXAMPLE HERE USING THIS FROM BOOTSTRAP https://v4-alpha.getbootstrap.com/content/code/ -->
                <pre>
                    <code>
/* 1 */
{
"edges" : [
{
"_id" : ObjectId("59b604570d13f46fca708b8c"),
"from" : "Node A",
"to" : "Node B",
"label" : "invokes"
},
{
"_id" : ObjectId("59d85b8c05320bf9559487e2"),
"from" : "Node B",
"to" : "Node C",
"label" : "invokes",
"steps" : NumberLong(0)
},
{
"_id" : ObjectId("59dc4d0405320bf95594d0b6"),
"from" : "Node C",
"to" : "Node D",
"label" : "invokes",
"steps" : NumberLong(1)
},
{
"_id" : ObjectId("59dc4d5605320bf95594d0d0"),
"from" : "Node D",
"to" : "Node E",
"label" : "invokes",
"steps" : NumberLong(2)
},
{
"_id" : ObjectId("59dc4ef505320bf95594d121"),
"from" : "Node E",
"to" : "Node F",
"label" : "invokes",
"steps" : NumberLong(3)
}
],
"vertexes" : [
{
"_id" : ObjectId("59d85aaa05320bf9559487aa"),
"name" : "Node B",
"weight" : 75,
"x" : 100,
"y" : 200,
"level" : 0
},
{
"_id" : ObjectId("59d85ad705320bf9559487b4"),
"name" : "Node C",
"weight" : 75,
"x" : 100,
"y" : 200,
"level" : 0
},
{
"_id" : ObjectId("59dc4ca405320bf95594d096"),
"name" : "Node D",
"weight" : 75,
"x" : 100,
"y" : 200,
"level" : 0
},
{
"_id" : ObjectId("59dc4cbb05320bf95594d09e"),
"name" : "Node E",
"weight" : 75,
"x" : 100,
"y" : 200,
"level" : 0
},
{
"_id" : ObjectId("59dc4ebd05320bf95594d10f"),
"name" : "Node F",
"weight" : 75,
"x" : 100,
"y" : 200,
"level" : 0
}
]
}
                    </code>
                </pre>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                Thanks for reading.  In upcoming blog posts, I will soon cover the follwing topics to improve on the example above.&nbsp;
                <ul>
                    <li><strong>Creating a Java DSL (domain-specific language) for MongoDB graph queries</strong>, to make it less unwieldly, with a syntax similar to <a href="https://neo4j.com/developer/cypher-query-language/">Cypher</a></li>
                    <li><strong>Faceted search on graph data using $graphLookup and $facet</strong></li>
                </ul>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
    </div>
</section>
<!--
<section class="cid-qvbjxOlHgO" id="image1-80" data-rv-view="550">

    

    <figure class="mbr-figure container">
            <div class="image-block" style="width: 66%;">
                <img src="assets/images/coffee-923094-1920-1920x1280-16-1400x933.jpg" width="1400" alt="Mobirise" title="" media-simple="true">
                <figcaption class="mbr-figure-caption mbr-figure-caption-over">
                    <div class="container pb-5 mbr-white align-center mbr-fonts-style display-7">Vestibulum id nisl eu ipsum ultrices sodales. Donec non nibh at diam porta porttitor. Aenean dignissim porttitor aliquam. Etiam a sapien quis velit rhoncus pulvinar. Nunc dictum pretium lacus, nec convallis mauris vestibulum sit amet. Nam pretium tristique mauris in tempor. Phasellus consequat ipsum quis libero tristique ornare. Nulla ante libero, viverra at eros eu, fermentum rutrum lacus.</div>
                </figcaption>
            </div>
    </figure>
</section>
-->

<!--
<section class="cid-qvRdQNPdCl" id="video3-mh" data-rv-view="575">

    
    
    <figure class="mbr-figure align-center container">
        <div class="video-block" style="width: 80%;">
            <div><iframe class="mbr-embedded-video" src="https://www.youtube.com/embed/hGaQaBeUfGw?rel=0&amp;amp;showinfo=0&amp;autoplay=0&amp;loop=0" width="1280" height="720" frameborder="0" allowfullscreen></iframe></div>
        </div>
    </figure>
</section>
-->

<section once="" class="cid-qvbpqoTMWJ" id="footer6-8d" data-rv-view="577">

    

    

    <div class="container">
        <div class="media-container-row align-center mbr-white">
            <div class="col-12">
                <p class="mbr-text mb-0 mbr-fonts-style display-7">
                    © Copyright 2017 <a href="https://www.commonaspect.com" class="text-white">Common Aspect, LLC</a> - All Rights Reserved
                </p>
            </div>
        </div>
    </div>
</section>


  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/smooth-scroll/smooth-scroll.js"></script>
  <script src="assets/shopping-cart/minicart.js"></script>
  <script src="assets/shopping-cart/jquery.easing.min.js"></script>
  <script src="assets/shopping-cart/minicart-customizer.js"></script>
  <script src="assets/dropdown/js/script.min.js"></script>
  <script src="assets/bootstrap-carousel-swipe/bootstrap-carousel-swipe.js"></script>
  <script src="assets/jarallax/jarallax.min.js"></script>
  <script src="assets/jquery-mb-ytplayer/jquery.mb.ytplayer.min.js"></script>
  <script src="assets/jquery-mb-vimeo_player/jquery.mb.vimeo_player.js"></script>
  <script src="assets/touch-swipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/theme/js/script.js"></script>
  <script src="assets/mobirise-slider-video/script.js"></script>
  
  
</body>
</html>