<!DOCTYPE html>
<html>
<head>
  <!-- Site made with Mobirise Website Builder v4.3.0, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.3.0, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="assets/images/ca-logo.png" type="image/x-icon">
  <meta name="description" content="HTML Blog Template - Free Download">
  <title>Blog | Common Aspect, LLC</title>
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/shopping-cart/minicart-theme.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">

    <style>
        .cert-logo {
            display: inline-block;
            margin: 0 10px 13px 0;
        }
        .navbar-nav .nav-item .nav-link {
            margin: .667em 1.667em !important;
            font-weight: 500 !important;
            padding: 0;
            transition: color .2s ease-in-out;
        }
        pre {
            overflow: auto;
            white-space: pre;
        }
    </style>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49098417-2"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-49098417-2');
  </script>


</head>
<body>

<!-- -->


<script>var shopcartSettings = {"shopcart_top_offset":120,"side_offset":20,"site_width":1150,"shopcart_icon_color":"#FFFFFF","shopcart_back_color":"#2969b0","shopcart_icon_size":48,"sc_count_color":"#FFFFFF","sc_count_back_color":"#fc26ae","sc_count_size":12,"checkout_button":"Check Out with"};</script>
<section class="menu cid-qv1frvgcz3" once="menu" id="menu1-7v" data-rv-view="541">

    

    <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm bg-color transparent">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="menu-logo">
            <!--
            <div class="navbar-brand">
                
                <span class="navbar-caption-wrap"><a class="navbar-caption text-white display-4" href="https://mobirise.com/bootstrap-template/">
                        BOOTSTRAP TEMPLATE</a></span>
            </div>
            -->
            <div class="navbar-brand">
                <a href="http://www.commonaspect.com" class="navbar-logo"><img src="assets/images/ca-logo.png" alt="Common Aspect logo"></a>
            </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <!--
            <ul class="navbar-nav nav-dropdown" data-app-modern-menu="true"><li class="nav-item dropdown"><a class="nav-link link text-white dropdown-toggle display-4" href="blog.html" data-toggle="dropdown-submenu" aria-expanded="false">
                        
                        BLOCK DEMOS 1</a><div class="dropdown-menu"><a class="text-white dropdown-item display-4" href="slider.html">Slider Header Demo</a><a class="text-white dropdown-item display-4" href="video-background.html">Video Background Demo</a><a class="text-white dropdown-item display-4" href="footer-template.html">Footer Template</a><a class="text-white dropdown-item display-4" href="table-template.html">Table Template</a><a class="text-white dropdown-item display-4" href="carousel-template.html">Carousel Template</a><a class="text-white dropdown-item display-4" href="blog.html">Gallery Template</a><a class="text-white dropdown-item display-4" href="menu-template.html">Menu Template</a><a class="text-white dropdown-item display-4" href="navigation-menu-template.html">Navigation Menu Template</a><a class="text-white dropdown-item display-4" href="navbar-template.html">Navbar Template</a><a class="text-white dropdown-item display-4" href="header-template.html">Header Template</a><a class="text-white dropdown-item display-4" href="registration-form-template.html">Registration Form Template</a><a class="text-white dropdown-item display-4" href="grid-template.html">Grid Template</a><a class="text-white dropdown-item display-4" href="social-network-template.html">Social Network Template</a><a class="text-white dropdown-item display-4" href="parallax-template.html">Parallax Template</a><a class="text-white dropdown-item display-4" href="parallax-scrolling-template.html">Parallax Scrolling Template</a></div></li>
                <li class="nav-item dropdown open"><a class="nav-link link text-white dropdown-toggle display-4" href="blog.html" data-toggle="dropdown-submenu" aria-expanded="true">
                        
                        BLOCK DEMOS 2</a><div class="dropdown-menu"><a class="text-white dropdown-item display-4" href="shopping-cart-template.html">Shopping Cart Template</a><a class="text-white dropdown-item display-4" href="contact-form-template.html">Contact Form Template</a><a class="text-white dropdown-item display-4" href="list-template.html">List Template</a><a class="text-white dropdown-item display-4" href="video-template.html">Video Template</a><a class="text-white dropdown-item display-4" href="photo-gallery-template.html">Photo Gallery Template</a><a class="text-white dropdown-item display-4" href="map-template.html">Map Template</a><a class="text-white dropdown-item display-4" href="faq-template.html">FAQ Template</a><a class="text-white dropdown-item display-4" href="slider-template.html">Slider Template</a><a class="text-white dropdown-item display-4" href="background-template.html">Video Background Template</a><a class="text-white dropdown-item display-4" href="documentation-template.html">Documentation Template</a><a class="text-white dropdown-item display-4" href="article-template.html">Article Template</a><a class="text-white dropdown-item display-4" href="google-maps-template.html">Google Maps Template</a><a class="text-white dropdown-item display-4" href="form-templates.html">Form Templates </a><a class="text-white dropdown-item display-4" href="tab-template.html">Tab Template</a><a class="text-white dropdown-item display-4" href="video-gallery-template.html">Video Gallery Template</a></div></li>
                
                <li class="nav-item dropdown">
                    <a class="nav-link link text-white dropdown-toggle display-4" href="page36.html" data-toggle="dropdown-submenu" aria-expanded="false">SITE TEMPLATES</a><div class="dropdown-menu"><a class="text-white dropdown-item display-4" href="one-page.html">One Page Template<br></a><a class="text-white dropdown-item display-4" href="blog.html">Blog Template Demo<br></a></div>
                </li></ul>
            <div class="navbar-buttons mbr-section-btn"><a class="btn btn-sm btn-primary display-4" href="https://mobirise.com/bootstrap-template/mobirise-free-template.zip">
                    
                    FREE DOWNLOAD</a></div>
                    -->
            <ul class="navbar-nav">

                <li class="nav-item"><a class="nav-link link text-white display-4" href="http://www.commonaspect.com#header3-8l">ABOUT US</a></li>

                <li class="nav-item"><a class="nav-link link text-white display-4" href="http://www.commonaspect.com#features2-8r">SERVICES</a></li>

                <li class="nav-item"><a class="nav-link link text-white display-4" href="http://www.commonaspect.com#footer2-8z">CONTACT</a></li>

                <li class="nav-item"><a class="nav-link link text-white display-4" href="blog.html">BLOG</a></li>

            </ul>
        </div>
    </nav>
</section>

<section class="engine"><a href="https://mobirise.co/j">design your own website for free</a></section><section class="mbr-section content5 cid-qvbiXHsAN2 mbr-parallax-background" id="content5-7w" data-rv-view="543">

    

    <div class="mbr-overlay" style="opacity: 0.6; background-color: rgb(35, 35, 35);">
    </div>

    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <!--
                <h1 class="align-center mbr-bold mbr-white pb-3 mbr-fonts-style display-1">BOOTSTRAP BLOG TEMPLATE</h1>
                <h3 class="mbr-section-subtitle align-center mbr-light mbr-white pb-3 mbr-fonts-style display-5">Make your own bootstrap blog in minutes!&nbsp;</h3>
                -->
                
            </div>
        </div>
    </div>
</section>

<section class="mbr-section content4 cid-qvbjfGj2Ze" id="content4-7x" data-rv-view="546">

    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <!--<h2 class="align-center pb-3 mbr-fonts-style display-5">GRAPH DATABASE IN MONGODB 3.4 - PART 1: EXTERNAL EDGE COLLECTIONS</h2>-->
                <h2 class="align-center pb-3 mbr-fonts-style display-5">EMULATING NEO4J GRAPH DB NODES AND EDGES IN MONGODB 3.3</h2>
                <h3 class="mbr-section-subtitle align-center mbr-light mbr-fonts-style display-7"><em>By Chris Heino posted October 15, 2017</em></h3>
                
            </div>
        </div>
    </div>
</section>

<section class="mbr-section article content1 cid-qvbjomyZfb" id="content1-7y" data-rv-view="548">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <h3>Introduction</h3>
                Multi-modal NoSQL database MongoDB added several interesting new features in version 3.3, including the <a href="#">$lookup</a>, <a href="#">$graphlookup</a>, and <a href="#">$facet</a> aggregation stages. In this article,
                I will explore how well the new $graphlookup feature compares to the graph querying capabilities of a specialized graph database such as Neo4j.  In particular, we will explain a technique storing graph vertexes and
                edges in separate MongoDB collections to allow maximum flexibility for querying based on both vertex and edge properties.  At the time of writing, I did not find any concrete examples of this technique online, although the
                MongoDB slide presentation <a href="#">here</a> makes mention of edge collections.  This example is based on my own experimentation.&nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <h3>Data Schema</h3>
                For our data, we'll use a classic example of a graph theory application: a simple product recommendations engine as you might find on a typical e-commerce website.&nbsp;
            </div>
        </div>
    </div>
</section>
<section class="cid-qvbjxOlHgO" id="image1-80" data-rv-view="550">
    <figure class="mbr-figure container">
        <div class="image-block" style="width: 66%;">
            <img src="assets/images/blog/fig1.png" width="851" alt="Mobirise" title="" media-simple="true">
            <!--
            <figcaption class="mbr-figure-caption mbr-figure-caption-over">
                <div class="container pb-5 mbr-white align-center mbr-fonts-style display-7">Vestibulum id nisl eu ipsum ultrices sodales. Donec non nibh at diam porta porttitor. Aenean dignissim porttitor aliquam. Etiam a sapien quis velit rhoncus pulvinar. Nunc dictum pretium lacus, nec convallis mauris vestibulum sit amet. Nam pretium tristique mauris in tempor. Phasellus consequat ipsum quis libero tristique ornare. Nulla ante libero, viverra at eros eu, fermentum rutrum lacus.</div>
            </figcaption>
            -->
        </div>
    </figure>
</section>
<section class="mbr-section article content1 cid-qvbjomyZfb" id="content1-8y" data-rv-view="548">
    <div class="container">
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <!-- TODO Should we name "vertexes" "products" instead? -->
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                The node data will be stored in two Mongo collections named customer and product, and we will use another collection for the edge data.
                &nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <strong>Collection: customer</strong>
                <!-- Remember code snippets are whitespace sensitive, so do not indent here or will appear centered in <pre> block -->
                <!-- CODE SNIPPET EXAMPLE HERE USING THIS FROM BOOTSTRAP https://v4-alpha.getbootstrap.com/content/code/ -->
                <pre>
                    <code>
/* 1 */
{
    "_id" : ObjectId("5a0bda87e7a83c9369d6f92a"),
    "name" : "Customer 1"
}

/* 2 */
{
    "_id" : ObjectId("5a0bda9fe7a83c9369d6f92c"),
    "name" : "Customer 2"
}

/* 3 */
{
    "_id" : ObjectId("5a0bdab3e7a83c9369d6f932"),
    "name" : "Customer 3"
}

/* 4 */
{
    "_id" : ObjectId("5a0bdac5e7a83c9369d6f938"),
    "name" : "Customer 4"
}
                    </code>
                </pre>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <strong>Collection: product</strong>
                <!-- Remember code snippets are whitespace sensitive, so do not indent here or will appear centered in <pre> block -->
                <!-- CODE SNIPPET EXAMPLE HERE USING THIS FROM BOOTSTRAP https://v4-alpha.getbootstrap.com/content/code/ -->
                <pre>
                    <code>
/* 1 */
{
    "_id" : ObjectId("5a0bd9f8e7a83c9369d6f90c"),
    "name" : "Product A"
}

/* 2 */
{
    "_id" : ObjectId("5a0bda22e7a83c9369d6f914"),
    "name" : "Product B"
}

/* 3 */
{
    "_id" : ObjectId("5a0bda3ee7a83c9369d6f91a"),
    "name" : "Product C"
}

/* 4 */
{
    "_id" : ObjectId("5a0bda68e7a83c9369d6f920"),
    "name" : "Product D"
}
                    </code>
                </pre>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <strong>Collection: edge</strong>
                <!-- Remember code snippets are whitespace sensitive, so do not indent here or will appear centered in <pre> block -->
                <!-- CODE SNIPPET EXAMPLE HERE USING THIS FROM BOOTSTRAP https://v4-alpha.getbootstrap.com/content/code/ -->
                <pre>
                    <code>
/* 1 */
{
    "_id" : ObjectId("5a0be126e7a83c9369d6fb40"),
    "from" : "Customer 1",
    "to" : "Product D",
    "refs" : [
        ObjectId("5a0be13ae7a83c9369d6fb48")
    ],
    "label" : "viewed"
}

/* 2 */
{
    "_id" : ObjectId("5a0be13ae7a83c9369d6fb48"),
        "from" : "Customer 1",
        "to" : "Product A",
        "refs" : [
            ObjectId("5a0be126e7a83c9369d6fb40"),
            ObjectId("5a0be14de7a83c9369d6fb52")
        ],
        "label" : "bought"
}

/* 3 */
{
    "_id" : ObjectId("5a0be14de7a83c9369d6fb52"),
    "from" : "Customer 2",
    "to" : "Product A",
    "refs" : [
        ObjectId("5a0be13ae7a83c9369d6fb48"),
        ObjectId("5a0be15ee7a83c9369d6fb56")
    ],
    "label" : "bought"
}

/* 4 */
{
    "_id" : ObjectId("5a0be15ee7a83c9369d6fb56"),
    "from" : "Customer 2",
    "to" : "Product B",
    "refs" : [
        ObjectId("5a0be14de7a83c9369d6fb52"),
        ObjectId("5a0bde97e7a83c9369d6fa60")
    ],
    "label" : "bought"
}

/* 5 */
{
    "_id" : ObjectId("5a0be172e7a83c9369d6fb60"),
    "from" : "Customer 3",
    "to" : "Product B",
    "refs" : [
        ObjectId("5a0be15ee7a83c9369d6fb56"),
        ObjectId("5a0be1cae7a83c9369d6fb8e")
    ],
    "label" : "bought"
}

/* 6 */
{
    "_id" : ObjectId("5a0be1cae7a83c9369d6fb8e"),
    "from" : "Customer 3",
        "to" : "Product C",
        "refs" : [
            ObjectId("5a0be172e7a83c9369d6fb60")
        ],
    "label" : "bought"
}
                    </code>
                </pre>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <!-- TODO Should we name "vertexes" "products" instead? -->
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                This creates "You may also like" functionality.
                <ol>
                    <li>Start with current product being viewed by customer</li>
                    <li>Traverse "purchased" edges to customers and products.</li>
                    <li>Select the products along the traversal path.</li>
                </ol>
                This gives us the other products purchased by any customer who purchased the original product, and also products purchased by other customers who purchased those products. These types of "friend of a friend" queries are what graph databases excel at, while a traditional relational database is not ideal for this due to the arbitrary number of SQL joins which would be involved since this has performance implications and also typically requires programmatic SQL generation.  The strength of each recommendation returned can be determined by its proximity to the starting product.
                &nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <!-- TODO Should we name "vertexes" "products" instead? -->
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <h3>MongoDB Query</h3>
                The approach below is inspired by the way graph databases such as Neo4j or OrientDB store vertexes and edges as separate objects in the database.
                For purposes of this example, we will create two collections in MongoDB, named vertexes and edges.  The documents in the vertexes collection will represent our e-commerce products and contain their attributes. The
                edge collection documents will represent the edges or relationships between vertexes or nodes, including a relationship type, a from_id for the source node ID, a to_id for the target node ID, and any other custom
                properties you want to include.  Note that one advantage of this approach is that we do not need to embed the edges within the nodes, in fact the nodes do not need to contain any relationship data whatsoever.&nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                The example below looks for outbound relationships from the target product.&nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <!-- Remember code snippets are whitespace sensitive, so do not indent here or will appear centered in <pre> block -->
                <!-- CODE SNIPPET EXAMPLE HERE USING THIS FROM BOOTSTRAP https://v4-alpha.getbootstrap.com/content/code/ -->
                <pre>
                    <code>
db.product.aggregate( [
    { $match: { "name": "Product B" } },
    { $lookup: {
            from: "edge",
            localField: "name",
            foreignField: "to",
            as: "edge_docs"
        }
    },
    { $project: {
            "edge_docs": 1
        }
    },
    { $graphLookup: {
            from: "edge",
            startWith: "$edge_docs._id",
            connectFromField: "refs",
            connectToField: "_id",
            as: "pathEdges",
            maxDepth: 2,
            depthField: 'steps',
            restrictSearchWithMatch: { "label" : "purchased" }
        }
    },
    { $project: { "edges" : "$pathEdges" } },
    { $unwind: "$edges" },
    { $sort: { 'edges.steps': 1 } },
    { $lookup: {
            from: "customer",
            let: { from: "$edges.from", steps: "$edges.steps" },
            pipeline: [
                { $match:
                    { $expr: { $eq: [ "$name",  "$$from" ] } }
                },
                { $project: { _id: "$_id", name: "$name", steps: "$$steps" } }
            ],
            as: "customers"
        }
    },
    { $unwind: "$customers" },
    { $sort: { 'customers.steps': 1 } },
    { $lookup: {
            from: "product",
            let: { to: "$edges.to", steps: "$edges.steps" },
            pipeline: [
                { $match:
                    { $expr: { $eq: [ "$name",  "$$to" ] } }
                },
                { $project: { _id: "$_id", name: "$name", steps: "$$steps" } }
            ],
            as: "products"
        }
    },
    { $unwind: "$products" },
    { $sort: { 'products.steps': 1 } },
    { $group: { _id: null, edgs: { $push: "$edges" }, cstmrs: { $push: "$customers" }, prdcts: { $push: "$products" } } },
    { $project: { _id: 0, edges: "$edgs", customers: "$cstmrs", products: "$prdcts" } }
] ).map( function(u) {
    var customerIds = [], newCustomers = [];
    for (var i = 0; i < u.customers.length; i++) {
        var c = u.customers[i];
        if (customerIds.indexOf(c._id.toString()) == -1)
            newCustomers.push(c);
        customerIds.push(c._id.toString());
    }
    var productIds = [], newProducts = [];
    for (var i = 0; i < u.products.length; i++) {
        var p = u.products[i];
        if (productIds.indexOf(p._id.toString()) == -1)
            newProducts.push(p);
        productIds.push(p._id.toString());
    }
    u.customers = newCustomers;
    u.products = newProducts;
    return u;
} );
                    </code>
                </pre>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                The query above performs the following steps in the aggregation pipeline:&nbsp;
                <ul>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/">$match</a> to select the target product node.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/">$lookup</a> to find all outbound edges from target node.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/">$project</a> to get the edge data we want to work with.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/graphLookup/">$graphLookup</a> to traverse the edges having label "invokes", up to 2 levels deep.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/">$project</a> to get an edges array.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/">$unwind</a> to get the documents in the edges  array.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/">$sort</a> on the "steps" field to list edges in order of traversal.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/">$lookup</a> to get all customer nodes in the traversal path.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/">$unwind</a> and <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/">$sort</a> to sort the customer nodes by order of traversal.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/">$lookup</a> to get all product nodes in the traversal path.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/">$unwind</a> and <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/">$sort</a> to sort the product nodes by order of traversal.</li>
                    <li>Use <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/group/">$group</a> and <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/">$project</a> to aggregate the documents from each traversal step into a single document with a list of edges and nodes.</li>
                    <li>Use a <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/map/">$map</a> function to get distinct customer and product nodes in results.</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section class="mbr-section article content1 cid-qvbjsgNEPl" id="content2-7z" data-rv-view="549">

     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <blockquote>The refs property is necessary to allow bidirectional traversal, similar to "both" in Neo4j Cypher.&nbsp;</blockquote>
            </div>
        </div>
    </div>
</section>

<section class="mbr-section article content1 cid-qvbjomyZfb" id="content1-9y" data-rv-view="548">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                After running the query, we get the following output. This document gives us access to all edges and nodes that resulted from the graph traversal, in the correct sequence of the traversal path.&nbsp;
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <!-- Remember code snippets are whitespace sensitive, so do not indent here or will appear centered in <pre> block -->
                <!-- CODE SNIPPET EXAMPLE HERE USING THIS FROM BOOTSTRAP https://v4-alpha.getbootstrap.com/content/code/ -->
                <pre>
                    <code>
/* 1 */
[
    {
        "edges" : [
            {
                "_id" : ObjectId("5a0be172e7a83c9369d6fb60"),
                "from" : "Customer 3",
                "to" : "Product B",
                "refs" : [
                    ObjectId("5a0be15ee7a83c9369d6fb56"),
                    ObjectId("5a0be1cae7a83c9369d6fb8e")
                ],
                "label" : "purchased",
                "steps" : NumberLong(0)
            },
            {
                "_id" : ObjectId("5a0be15ee7a83c9369d6fb56"),
                "from" : "Customer 2",
                "to" : "Product B",
                "refs" : [
                    ObjectId("5a0be14de7a83c9369d6fb52"),
                    ObjectId("5a0bde97e7a83c9369d6fa60")
                ],
                "label" : "purchased",
                "steps" : NumberLong(0)
            },
            {
                "_id" : ObjectId("5a0be1cae7a83c9369d6fb8e"),
                "from" : "Customer 3",
                "to" : "Product C",
                "refs" : [
                    ObjectId("5a0be172e7a83c9369d6fb60")
                ],
                "label" : "purchased",
                "steps" : NumberLong(1)
            },
            {
                "_id" : ObjectId("5a0be14de7a83c9369d6fb52"),
                "from" : "Customer 2",
                "to" : "Product A",
                "refs" : [
                    ObjectId("5a0be13ae7a83c9369d6fb48"),
                    ObjectId("5a0be15ee7a83c9369d6fb56")
                ],
                "label" : "purchased",
                "steps" : NumberLong(1)
            },
            {
                "_id" : ObjectId("5a0be13ae7a83c9369d6fb48"),
                "from" : "Customer 1",
                "to" : "Product A",
                "refs" : [
                    ObjectId("5a0be126e7a83c9369d6fb40"),
                    ObjectId("5a0be14de7a83c9369d6fb52")
                ],
                "label" : "purchased",
                "steps" : NumberLong(2)
            }
        ],
        "customers" : [
            {
                "_id" : ObjectId("5a0bdab3e7a83c9369d6f932"),
                "name" : "Customer 3",
                "steps" : NumberLong(0)
            },
            {
                "_id" : ObjectId("5a0bda9fe7a83c9369d6f92c"),
                "name" : "Customer 2",
                "steps" : NumberLong(0)
            },
            {
                "_id" : ObjectId("5a0bda87e7a83c9369d6f92a"),
                "name" : "Customer 1",
                "steps" : NumberLong(2)
            }
                    ],
        "products" : [
            {
                "_id" : ObjectId("5a0bda22e7a83c9369d6f914"),
                "name" : "Product B",
                "steps" : NumberLong(0)
            },
            {
                "_id" : ObjectId("5a0bda3ee7a83c9369d6f91a"),
                "name" : "Product C",
                "steps" : NumberLong(1)
            },
            {
                "_id" : ObjectId("5a0bd9f8e7a83c9369d6f90c"),
                "name" : "Product A",
                "steps" : NumberLong(1)
            }
        ]
    }
]
                    </code>
                </pre>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
        <div class="media-container-row">
            <div class="mbr-text col-12 col-md-8 mbr-fonts-style display-7">
                <h3>Conclusion</h3>
                The results of this brief experiment are promising for MongoDB's graph query capabilities.  We were able to successfully model a directed property graph including both node and edge properties and then query those properties while traversing the graph.  The query syntax is more verbose than Neo4j's Cypher, but for those already using MongoDB for their application, this seems to be a feasible alternative to deploying a dedicated graph database.  Another advantage is that since the graph queries occur in Mongo's aggregation framework, it's easy to integrate with other Mongo features such as faceted search, whereas Neo4j does not support faceted search out of the box.  Thanks for reading.  In upcoming posts, I plan to cover the following related topics to improve on the example above.&nbsp;
                <ul>
                    <li><strong>Creating a Java DSL (domain-specific language) for MongoDB graph queries</strong>, with a syntax similar to <a href="https://neo4j.com/developer/cypher-query-language/">Cypher</a></li>
                    <li><strong>A Java library to help manage the nodes and edges</strong></li>
                    <li><strong>More graph query examples</strong></li>
                    <li><strong>Indexing strategies for graph data in MongoDB</strong></li>
                    <li><strong>Faceted search on graph data using $graphLookup and $facet</strong></li>
                </ul>
            </div>
        </div>
        <div class="media-container-row">&nbsp;</div>
    </div>
</section>
<!--
<section class="cid-qvbjxOlHgO" id="image1-80" data-rv-view="550">

    

    <figure class="mbr-figure container">
            <div class="image-block" style="width: 66%;">
                <img src="assets/images/coffee-923094-1920-1920x1280-16-1400x933.jpg" width="1400" alt="Mobirise" title="" media-simple="true">
                <figcaption class="mbr-figure-caption mbr-figure-caption-over">
                    <div class="container pb-5 mbr-white align-center mbr-fonts-style display-7">Vestibulum id nisl eu ipsum ultrices sodales. Donec non nibh at diam porta porttitor. Aenean dignissim porttitor aliquam. Etiam a sapien quis velit rhoncus pulvinar. Nunc dictum pretium lacus, nec convallis mauris vestibulum sit amet. Nam pretium tristique mauris in tempor. Phasellus consequat ipsum quis libero tristique ornare. Nulla ante libero, viverra at eros eu, fermentum rutrum lacus.</div>
                </figcaption>
            </div>
    </figure>
</section>
-->

<!--
<section class="cid-qvRdQNPdCl" id="video3-mh" data-rv-view="575">

    
    
    <figure class="mbr-figure align-center container">
        <div class="video-block" style="width: 80%;">
            <div><iframe class="mbr-embedded-video" src="https://www.youtube.com/embed/hGaQaBeUfGw?rel=0&amp;amp;showinfo=0&amp;autoplay=0&amp;loop=0" width="1280" height="720" frameborder="0" allowfullscreen></iframe></div>
        </div>
    </figure>
</section>
-->

<section once="" class="cid-qvbpqoTMWJ" id="footer6-8d" data-rv-view="577">

    

    

    <div class="container">
        <div class="media-container-row align-center mbr-white">
            <div class="col-12">
                <p class="mbr-text mb-0 mbr-fonts-style display-7">
                    © Copyright 2017 <a href="https://www.commonaspect.com" class="text-white">Common Aspect, LLC</a> - All Rights Reserved
                </p>
            </div>
        </div>
    </div>
</section>


  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/smooth-scroll/smooth-scroll.js"></script>
  <script src="assets/shopping-cart/minicart.js"></script>
  <script src="assets/shopping-cart/jquery.easing.min.js"></script>
  <script src="assets/shopping-cart/minicart-customizer.js"></script>
  <script src="assets/dropdown/js/script.min.js"></script>
  <script src="assets/bootstrap-carousel-swipe/bootstrap-carousel-swipe.js"></script>
  <script src="assets/jarallax/jarallax.min.js"></script>
  <script src="assets/jquery-mb-ytplayer/jquery.mb.ytplayer.min.js"></script>
  <script src="assets/jquery-mb-vimeo_player/jquery.mb.vimeo_player.js"></script>
  <script src="assets/touch-swipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/theme/js/script.js"></script>
  <script src="assets/mobirise-slider-video/script.js"></script>
  
  
</body>
</html>